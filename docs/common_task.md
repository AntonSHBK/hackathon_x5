## Суть задачи

Необходимо разработать сервис извлечения именованных сущностей (NER) из поисковых запросов пользователей мобильного приложения торговой сети «Пятёрочка».
Запросы могут содержать:

* простые ключевые слова («молоко»),
* уточнения («кола 2л без сахара»),
* сокращения, опечатки и неполные слова.

Сервис должен автоматически выделять ключевые сущности, чтобы улучшить поиск и упростить формирование продуктовой корзины.

## Целевые сущности

Система должна распознавать четыре типа сущностей:

1. **TYPE** — категория товара (молоко, хлеб, вода, чипсы и т. п.)
2. **BRAND** — бренд (Coca-Cola, Простоквашино, Lays и др.)
3. **VOLUME** — объём/вес/количество (0.5 л, 200 г, 10 шт.)
4. **PERCENT** — процент (2.5%, 15%)

Формат разметки: **BIO**

* `B-ENTITY` — начало сущности
* `I-ENTITY` — продолжение сущности
* `O` — не сущность

## Ограничения

* Время ответа веб-сервиса на один запрос не более **1 секунды**.
* Сервис должен работать непрерывно и поддерживать **асинхронную обработку** параллельных запросов.
* Решение должно быть **упаковано в Docker-контейнер**.
* Сервис должен быть доступен по публичному URL и предоставлять endpoint:

  * `POST /api/predict`
  * Вход: `{"input": "сгущенное молоко"}`
  * Выход: список сущностей с индексами и типами.


* Запрещается:
  * использовать ручные словари, собранные под задачу,
  * использовать коммерческие NER-API,
  * использовать закрытые датасеты.

## Метрика качества

Основная метрика: **macro-averaged F1-score** по BIO-разметке для всех типов сущностей.

### Определения:

* **TP (True Positive)** — сущность выделена правильно (начало, конец и тип совпадают).
* **FP (False Positive)** — модель выделила сущность неверно.
* **FN (False Negative)** — сущность в эталоне не была найдена моделью.

### Формулы:

* Precision = TP / (TP + FP)
* Recall = TP / (TP + FN)
* F1 = 2 \* (Precision \* Recall) / (Precision + Recall)

Macro-F1 = среднее F1 по всем типам сущностей (TYPE, BRAND, VOLUME, PERCENT).

Запросы, обработанные дольше 1 секунды, получают нулевой результат по метрикам.

## Технические требования

* Язык: Python.
* Веб-фреймворк: рекомендуется FastAPI.
* ML-библиотеки: допускаются HuggingFace Transformers, PyTorch, TensorFlow, spaCy, NLTK и другие.
* Код должен быть выложен в GitHub.
* Финальная версия должна сопровождаться документацией и инструкцией по развёртыванию.
